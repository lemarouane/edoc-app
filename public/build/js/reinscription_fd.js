import $ from"jquery";import"datatables.net";import"datatables.net-dt";import"datatables.net-responsive";import"datatables.net-responsive-dt";import"bootstrap";function initializeCheckboxToggles(){[{checkboxId:"bourse_merite",fieldId:"bourse_merite_depuis_field"},{checkboxId:"bourse_troisieme_cycle",fieldId:"bourse_troisieme_cycle_depuis_field"},{checkboxId:"bourse_cotutelle",fieldId:"bourse_cotutelle_dates_field"},{checkboxId:"cotutelle",fieldId:"cotutelle_fields"}].forEach((({checkboxId:e,fieldId:t})=>{const o=document.getElementById(e),n=document.getElementById(t);o&&n?o.addEventListener("change",(()=>{n.style.display=o.checked?"block":"none"})):console.warn(`Checkbox (${e}) or field (${t}) not found`)}))}window.jQuery=window.$=$;let formationIndex=1;function addFormationRow(){const e=document.getElementById("formations_complementaires");if(!e)return void console.error("Formations container not found");const t=document.createElement("div");t.className="formation-row",t.innerHTML=`\n        <input type="date" name="formations[${formationIndex}][date]" placeholder="Date">\n        <input type="text" name="formations[${formationIndex}][duree]" placeholder="Durée en heures">\n        <input type="text" name="formations[${formationIndex}][intitule]" placeholder="Intitulé">\n        <input type="text" name="formations[${formationIndex}][organisateur]" placeholder="Organisateur">\n        <input type="text" name="formations[${formationIndex}][equivalence_heures]" placeholder="Équivalence en heures">\n        <button type="button" class="btn-remove" onclick="removeFormationRow(this)">Supprimer</button>\n    `,e.appendChild(t),formationIndex++}function removeFormationRow(e){e&&e.parentElement?e.parentElement.remove():console.error("Invalid button or parent element for removal")}function deleteReinscription(e){const t=e.getAttribute("href"),o=e.getAttribute("data-csrf");if(!t||!o)return console.error("Missing URL or CSRF token for deletion"),void alert("Erreur: Données manquantes pour la suppression.");$.ajax({url:t,type:"POST",data:{_token:o},success:()=>{console.log("Reinscription deleted successfully"),window.location.reload()},error:(e,t,o)=>{console.error(`Deletion failed: ${t} - ${o}`),alert("Erreur lors de la suppression.")}})}function initializeDataTable(){let e="fr-FR";try{const t=$("#langue");t.length&&(e=t.val(),"ar-AR"===e&&(e="ar"))}catch(e){console.warn("Error determining language, using default: fr-FR",e)}const t=`https://cdn.datatables.net/plug-ins/1.13.1/i18n/${e}.json`;$("#reinscriptionTable").DataTable({language:{url:t},paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!1,responsive:!0,order:[[3,"desc"]],pageLength:10,lengthMenu:[10,25,50,100]})}$(document).ready((()=>{initializeCheckboxToggles(),initializeDataTable()})),window.addFormationRow=addFormationRow,window.removeFormationRow=removeFormationRow,window.deleteReinscription=deleteReinscription;